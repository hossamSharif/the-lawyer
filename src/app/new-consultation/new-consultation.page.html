<ion-header>
  <ion-toolbar translucent dir="rtl"  class="toolPadding">
    <ion-title class="fontLarge">إستشارة جديدة</ion-title> 
     <ion-buttons slot="end" class="ion-margin-end" (click)="close()"> 
      <div class="circleDev">
        <ion-button fill="clear">
          <ion-icon name="close-outline"  class="ico" ></ion-icon>
        </ion-button>  
      </div>  
    </ion-buttons> 
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row  >
    <ion-card class="w100">
      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col size="4" class="ion-margin-top">
              <ion-label class="ion-padding" ><strong>  عنوان الإستشارة </strong></ion-label>
              <ion-item class="custInput"> 
                <ion-input placeholder="اكتب وصف  هنا "></ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="4" class="ion-margin-top">
              <ion-label class="ion-padding"><strong> نوع الإستشارة  </strong></ion-label>
              <ion-item class="custInput"  (click)="presentPopoverCustType($event)" >  
                <ion-icon name="chevron-down" color="medium" slot="end"></ion-icon> 
                <ion-label> {{selectedCustTye.name}}     </ion-label>
              </ion-item>
              <ion-popover  #popoverNotif [isOpen]="isOpenCustType" (didDismiss)="didDissmisCustType()">
                <ng-template>
                  <ion-content  dir="rtl">  
                    <ion-list class="ion-text-center"  *ngIf="custTypeArr.length>0">
                     <ion-item button lines="none" *ngFor="let log of custTypeArr" (click)="selectFromPopTypes(log)">
                     <ion-grid >
                       <ion-row class="ion-justify-content-center">
                         <ion-col size="9"> 
                             {{log.name}}    
                         </ion-col>
                         <!-- <ion-col size="3">
                           <ion-text color = "primary">{{log.datee | dateAgo}}</ion-text>
                         </ion-col> -->
                       </ion-row>
                     </ion-grid>
                   </ion-item> 
                    </ion-list> 
                  </ion-content>
                </ng-template>
              </ion-popover>
            </ion-col>
          </ion-row>
          <ion-row > 
            <ion-col size="4" class="ion-margin-top">
              <ion-label class="ion-padding"><strong> العميل </strong></ion-label>
              <ion-item class="custInput" (click)="presentPopover($event)">
                <ion-icon name="chevron-down" color="medium" slot="end"></ion-icon> 
                <ion-label> {{selectedItem.name}}     </ion-label>
                <!-- <ion-button fill="clear" (click)="refresh('item')" slot="end">
                  <ion-icon name="refresh" color="success"></ion-icon>
                </ion-button> -->
              </ion-item>
              <ion-popover  #popover [isOpen]="isOpen" (didDismiss)="didDissmis()">
                <ng-template>
                  <ion-header>
                    <ion-toolbar dir="rtl">
                      <ion-item class="normalInput ">
                        <ion-input #popInput [(ngModel)] ="searchTerm" (ionChange)="searchItem($event)"></ion-input>
                        <!-- <ion-button fill="clear" (click)="clear()" slot="end">
                          <ion-icon name="close" color="danger"></ion-icon>
                        </ion-button>   -->
                       </ion-item>
                    </ion-toolbar>
                  </ion-header>
                  <ion-content class="ion-padding" dir="rtl"> 
                    <!-- spinner -->
                    <ion-list class="ion-text-center"  *ngIf="searchResult.length==0 && searchTerm =='' ">
                      <ion-label>
                        <ion-spinner name="lines-sharp"></ion-spinner>
                      </ion-label> 
                    </ion-list>
                     <ion-list *ngIf="searchResult.length>0">
                      <ion-item lines="none" button *ngFor="let item of searchResult" (click)="selectFromPop(item)">
                        {{item.name}} 
                      </ion-item>
                    </ion-list> 
                  </ion-content>
                </ng-template>
              </ion-popover>
            </ion-col>
            <ion-col size="4" class="ion-margin-top">
              <ion-label class="ion-padding"><strong> نوع الإستشارة  </strong></ion-label>
              <ion-item class="custInput"  (click)="presentPopoverCustType($event)" >  
                <ion-icon name="chevron-down" color="medium" slot="end"></ion-icon> 
                <ion-label> {{selectedCustTye.name}}     </ion-label>
              </ion-item>
              <ion-popover  #popoverNotif [isOpen]="isOpenCustType" (didDismiss)="didDissmisCustType()">
                <ng-template>
                  <ion-content  dir="rtl">  
                    <ion-list class="ion-text-center"  *ngIf="custTypeArr.length>0">
                     <ion-item button lines="none" *ngFor="let log of custTypeArr" (click)="selectFromPopTypes(log)">
                     <ion-grid >
                       <ion-row class="ion-justify-content-center">
                         <ion-col size="9"> 
                             {{log.name}}    
                         </ion-col>
                         <!-- <ion-col size="3">
                           <ion-text color = "primary">{{log.datee | dateAgo}}</ion-text>
                         </ion-col> -->
                       </ion-row>
                     </ion-grid>
                   </ion-item> 
                    </ion-list> 
                  </ion-content>
                </ng-template>
              </ion-popover>
            </ion-col>
            <ion-col size="4" class="ion-margin-top">
              <ion-label class="ion-padding"><strong>    تاريخ  الإستشارة  </strong></ion-label>
              <ion-item class="custInput"> 
                <ion-datetime-button datetime="datetime"></ion-datetime-button>
              </ion-item>
              <ion-modal [keepContentsMounted]="true">
                <ng-template>
                  <ion-datetime id="datetime"></ion-datetime>
                </ng-template>
              </ion-modal>
            </ion-col>
            <ion-col size="4" class="ion-margin-top">
              <ion-label class="ion-padding"><strong> مقدم الإستشارة  </strong></ion-label>
              <ion-item class="custInput"> 
                <ion-input placeholder="  "></ion-input>
              </ion-item>
            </ion-col>
          </ion-row>

          
        </ion-grid>
      </ion-card-content>
      <ion-card-header class="listHed">
        <ion-button   fill="outline" (click)="save()"  color="medium" class="custButton rad10">
          <ion-icon class="ico " color="dark" name="add-circle-outline"></ion-icon>
             <ion-text color="dark"> حفــظ   </ion-text>     
        </ion-button> 
      </ion-card-header>
    </ion-card>
  </ion-row>
</ion-content>
